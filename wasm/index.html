<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>WebAssembly Dive in</title>

  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/solarized.css">

  <!-- Theme used for syntax highlighting of code -->
  <link rel="stylesheet" href="lib/css/zenburn.css">

  <style>
    h2,
    h1 {
      text-transform: none !important;
    }

    section {
      text-align: left;
    }

    .full>pre {
      /* width: 00px; */
      /* height: 500px; */
      font-size: 15px;
      display: absolute;
      top: -20%;
      left: -10%;
      width: 120%;
      height: 120%;
    }

    .small-li li {
      font-size: 80%;
    }
  </style>
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement('link');
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
    document.getElementsByTagName('head')[0].appendChild(link);
  </script>
</head>

<body>
  <div class="reveal">
    <div class="slides">
      <section data-background="#448aff" data-background-transition="zoom">
        <h1 style="color:#fff">WebAssembly Dive In</h1>
        <span style="color:#fff"> By Kevin Tan</span>
      </section>
      <section data-background="#43a047">
        <h2 style="color:#fff">Background</h2>
      </section>
      <section data-markdown>
        <script type="text/template">
            ## ç¼–è¯‘åŸç†
            1. è¯æ³•åˆ†æå™¨ï¼š Lexer -> ç”ŸæˆTokenï¼ˆAdditiveExpression -> a = 1 + 2)
            2. è¯­æ³•åˆ†æå™¨ï¼š Parser -> è¡¨è¾¾å¼éç»ˆç»“ç¬¦ -> ç»ˆç»“ç¬¦(S -> veE / S -> veEpd / S -> vedpd)
            3. å¼±ç±»å‹ï¼šç±»å‹åœ¨è¿è¡Œæ—¶æ¨æ–­
            4. å¼ºç±»å‹ï¼šæ— é¡»æ¨æ–­ï¼Œå¯ä»¥AOTä¼˜åŒ–ï¼Œç›´æ¥ç”ŸæˆäºŒè¿›åˆ¶æœºå™¨ç 
          </script>
      </section>
      <section data-markdown>
        <script type="text/template">
            ## V8 Compiler
            ![](https://raw.githubusercontent.com/stkevintan/pico/master/81fb4160.png)
          </script>
      </section>
      <section data-markdown>
        <script type="text/template">
            ## Just-in-Time
            å³æ—¶ç¼–è¯‘(JIT)æ˜¯ä¸€ç§å°†åŠ¨æ€è§£é‡Šä¸é™æ€ç¼–è¯‘ç»“åˆçš„è¿è¡Œæ–¹å¼ã€‚
          </script>
      </section>
      <section>
        <iframe data-preload data-src="https://codesandbox.io/embed/jit-mv7tb?fontsize=14" title="JIT"
          allow="geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb"
          style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"
          sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>
      </section>
      <section data-markdown>
        <script type="text/template">
                ## ASM.js
              </script>
      </section>
      <section data-markdown>
        <script type="text/template">
              ## ASM.js
              asm.jsæ˜¯Mozillaåœ¨13å¹´å‘å¸ƒçš„ä¸€æ¬¾ä¸­é—´è¯­è¨€ã€‚ç›®çš„æ˜¯é‡‡ç”¨Cç­‰å˜æˆè¯­è¨€æ¥ç¼–è¯‘æˆå¸¦æœ‰ç±»å‹ä¿¡æ¯çš„JSï¼Œä»¥ä¾¿äºjsç¼–è¯‘å™¨(eg: V8 TurboFan)è¿›è¡ŒAOTä¼˜åŒ– 

              asm.jsæ˜¯jsçš„ä¸¥æ ¼å­é›†
            </script>
      </section>
      <section data-markdown>
        <script type="text/template">
          ## ASM.js
          ```js
          var asm = (function(stdlib, foreign, heap) {
            'use asm';
            function __z3addii($0, $1) {
              $0 = $0|0; // $0 ä¸ºæ•´å‹
              $1 = $1|0; // $1 ä¸ºæ•´å‹
              var $2 = 0, label = 0, sp = 0;
              $2 = (($1) + ($0))|0;
              return ($2|0); // è¿”å›å€¼è¢«å£°æ˜ä¸ºæ•´å‹
            }
            return {
              add: __z3addii
            }
          })(window, null, new ArrayBuffer(0x10000));
          ```
      </script>
      </section>
      <section data-markdown>
        <script type="text/template">
                  ## ASM.js
                  1. Annotation: `x|0` [32æ•´å‹]ï¼Œ `+x` [åŒç²¾åº¦æµ®ç‚¹]ï¼Œ`(x)` [å•ç²¾åº¦æµ®ç‚¹] åªèƒ½æ ‡è®°æ•°å€¼
                  2. stdlib: ä¸€ä¸ªåŒ…å«jså†…ç½®æ ‡å‡†åº“çš„å¼•ç”¨å¯¹è±¡ï¼Œä¸€èˆ¬å¯ä»¥ä¼ window
                  3. foreignï¼š å¤–éƒ¨è‡ªå®šä¹‰jsæ–¹æ³•çš„å¼•ç”¨ã€‚
                  4. heapï¼š æ‰€æœ‰asmæ¨¡å—å¤–éƒ¨æ•°æ®éƒ½è¦å­˜æ”¾åœ¨è¿™é‡Œé¢æ‰èƒ½è¢«asmæ¨¡å—è¯»å–
                </script>
      </section>
      <section data-markdown>
        <script type="text/template">
            ## WebAssembly
          </script>
      </section>
      <section data-markdown>
        <script type="text/template">
          ASM.jsè¯­æ³•å¤ªç®€å•ï¼Œé™åˆ¶å¾ˆå¤šï¼ˆä¸¥æ ¼jså­é›†ï¼‰,æ— æ³•åšè¿›ä¸€æ­¥çš„æ•ˆç‡ä¼˜åŒ–
          1. å¼ºç±»å‹ (å®Œå…¨çš„ç±»å‹æ”¯æŒï¼Œä¸éœ€è¦åŠ¨æ€æ¨æ–­)
          2. ä½“ç§¯å° (äºŒè¿›åˆ¶ï¼Œä¿¡æ¯å¯†åº¦é«˜)
          3. é«˜æ•ˆç‡ ï¼ˆOpcodeæ¥è¿‘åº•å±‚æŒ‡ä»¤ï¼Œåœ¨ä¸åŒå¹³å°ä¸Šé€Ÿåº¦æ¥è¿‘åŸç”Ÿåº”ç”¨)
          4. é€šç”¨ï¼Œå¯ç§»æ¤
          5. å®‰å…¨ (ä¸“ä¸ºwebè®¾è®¡)
          </script>
      </section>

      <section data-background="#43a047">
        <h2 style="color:#fff">Compilation</h2>
      </section>
      <section>
        <h2>LLVM</h2>
        <img style="position: absolute;
        right: 0;
        height: 399px;
        max-width: none;
        max-height: none;
        top: -50%;"
          src="https://upload.wikimedia.org/wikipedia/en/thumb/4/4c/LLVM_Logo.svg/1920px-LLVM_Logo.svg.png" />
      </section>
      <section data-markdown>
        <script type="text/template">
                    ### LLVM
                    llvm(low level virtual machine) é€šç”¨ç¼–è¯‘å™¨åŸºç¡€è®¾æ–½ï¼Œå¯ä»¥ç”¨å®ƒæ¥å¼€å‘ç¼–è¯‘å™¨çš„å‰ç«¯å’Œåç«¯ã€‚ç›®å‰æ”¯æŒäº†Pythonã€Rubyã€Rustã€Scalaç­‰è¯­è¨€
1. å‰ç«¯ï¼šå°†ç¨‹åºè®¾è®¡è¯­è¨€è½¬åŒ–æˆä¸­é—´å½¢å¼IR ï¼ˆC/C++,Haskell, rust, Swiftç­‰)
3. åç«¯ï¼šæŒ‡ä»¤é›†çš„æ”¯æŒï¼ˆARMã€Qualcomm Hexagonã€MIPSç­‰ï¼‰
                  </script>
      </section>
      <section data-markdown>
        <script type="text/template">
                      ### [LLVM IR](https://llvm.org/docs/LangRef.html)
                      LLVMçš„æ ¸å¿ƒæ˜¯ä¸­é—´ç«¯è¡¨è¾¾å¼ï¼ˆIntermediate Representationï¼ŒIRï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§å¼ºç±»å‹çš„ç²¾ç®€æŒ‡ä»¤é›†ã€‚å…·ä½“æœ‰ä¸‰ç§è¡¨è¾¾å½¢å¼ï¼š
                      1. å†…å­˜ä¸­çš„C++å¯¹è±¡
                      2. å¯è¯»çš„æ–‡æœ¬æ ¼å¼(.ll)
                      3. åºåˆ—åŒ–åçš„bitcodeæ ¼å¼(.bc)
                    </script>
      </section>
      <section data-markdown>
        <script type="text/template">
                        ### LLVM
                        ![](https://raw.githubusercontent.com/stkevintan/pico/master/38aab1f7.png)
                        1. å‰ç«¯(Frontend): æºç  -> IR
                        2. ä¼˜åŒ–(Optimizer):IRä¼˜åŒ–
                        3. åç«¯(Backend): IRåˆ°æœºå™¨ç (target=x86/wasm32...)
                        4. è¿æ¥å™¨(Linker): é“¾æ¥èµ„æº(é™æ€é“¾æ¥ï¼ŒåŠ¨æ€é“¾æ¥)
                      </script>
      </section>
      <section data-markdown>
        <script type="text/template">
              ## Emscripten for ASM.js
            </script>
      </section>
      <section data-markdown>
        <script type="text/template">
         Emscriptenæ˜¯å®˜æ–¹åŸºäºLLVMæ„å»ºçš„å°†C/C++ä»£ç è½¬è¯‘æˆasmjsçš„å·¥å…·é“¾ã€‚
          1. å‰ç«¯ï¼ˆemcc,Emscripten Compiler Frontend)ï¼š å°†C/C++ç¼–è¯‘æˆLLVMçš„IR
          2. åç«¯ï¼ˆFastcomp) å°†LLVMä¸­é—´ä»£ç ç¼–è¯‘åˆ°ç›®æ ‡è¯­è¨€ï¼ˆjsï¼‰          
        </script>
      </section>
      <section data-markdown>
        <script type="text/template">
              ## Binaryen
            </script>
      </section>
      <section data-markdown>
        <script type="text/template">
            wasmå®˜æ–¹çš„ä¸€å¥—å·¥å…·é“¾ï¼Œæä¾›äº†ä¸€ä»½ç®€æ´binaryen IRä¸å¯¹åº”çš„åç«¯, ç›®å‰åŸºäºbinaryençš„ç¼–è¯‘å·¥å…·æœ‰ï¼š
            1. AssemblyScript: Typescript
            2. Asterius: Haskell
            3. asm2wasm: asm.js
            4. Emscripten
          </script>
      </section>
      <section data-markdown class="small-li">
        <script type="text/template">
            ### Compile to WebAssembly ?
            #### Ancient Way: 
            ```
            C/C++ - {Clang} -> LLVM IR - {llc} -> *.s - {s2wasm} -> wasm 
            ```
            #### Old Way: 
            ```
            C/C++ - {emcc/Fastcomp} -> ASM.js - {asm2wasm} -> wasm
            ```
            #### Modern Way (2019.3+): 
            ```
            C/C++ - {Clang} -> LLVM IR - {llc && wasmld (from LLVM 8)} -> wasm  
            ```
            1. [wasm object file linking spec](https://github.com/WebAssembly/tool-conventions/blob/master/Linking.md)
            2. [llvm wasm lld port doc](https://lld.llvm.org/WebAssembly.html)

          </script>
      </section>
      <section data-markdown>
        <script type="text/template">
            ## Exmaples
            [wasm-tutorial](https://github.com/stkevintan/wasm-tutorial)
          </script>
      </section>
      <section data-markdown>
        <script type="text/template">
          ### What about libc or libc++
          1. emcc(dlmalloc): [GitHub](https://github.com/emscripten-core/emscripten/blob/incoming/src/library_syscall.js)
          2. wasmception(musl-libc): [GitHub](https://github.com/yurydelendik/wasmception) [demo](https://webassembly.studio/?f=zusgrp6mjtn)
          3. wasi(dlmalloc): [GitHub](https://github.com/CraneStation/wasi-libc)
          4. rustc(dlmallow, wee_alloc)

          ![wee_alloc](https://raw.githubusercontent.com/stkevintan/pico/master/20190917173714.png)
        </script>
      </section>

      <section data-background="#43a047">
        <h2 style="color:#fff">Basic API</h2>
      </section>

      <section data-markdown class="full">
        <script type="text/template">
            ```ts
            //async
WebAssembly.compile(bufferSource: ArrayBuffer): Promise<WebAssembly.Module>
WebAssembly.instantiate(bufferSource: ArrayBuffer, importObj?: any): Promise<{
  module: WebAssembly.Module, 
  instance: WebAssembly.Instance
}>
WebAssembly.instantiate(module: WebAssembly.Module, importObj?: any): Promise<WebAssembly.Instance>
// è¯·æ±‚å¤´ï¼šContext-type: application/wasm
WebAssembly.compileStreaming(source: Promise<Responce>): Promise<WebAssembly.Module>

//sync
new WebAssembly.Module(bufferSource: ArrayBuffer)
new WebAssembly.Instance(module: WebAssembly.Module, importObj?: any)

// helper
type Kind = "function" | "table" | "memory" | "global"
WebAssembly.Module.customSections(module: WebAssembly.Module, sectionName: string): ArrayBuffer[]
WebAssembly.Module.exports(module: WebAssembly.Module): { name: string, kind: Kind }][]
WebAssembly.Module.imports(module: WebAssembly.Module): { module: string, name: string, kind: Kind }][]

// validation and error
WebAssembly.validate(bufferSource: ArrayBuffer):boolean

interface CommonError {
  message: string
  filename: string
  lineNumber: number
}
new WebAssembly.CompileError(message: string, fileName: string, lineNumber: number) // è§£ç ï¼ŒéªŒè¯é˜¶æ®µ
new WebAssembly.LinkError(message: string, fileName: string, lineNumber: number)  // å®ä¾‹åŒ–é˜¶æ®µ
new WebAssembly.RuntimeError(message: string, fileName: string, lineNumber: number) // è¿è¡Œé˜¶æ®µ
            ```
            </script>
      </section>

      <section data-markdown>
        <script type="text/template">
            ### Async Example
            ```ts
            fetch('./index.wasm').then(response =>
              response.arrayBuffer()
            ).then(bytes => WebAssembly.instantiate(bytes, {
              env: {
                yyy: xxx
              }
            })).then(wasm => {
              const { module, instance } = wasm;
            }).catch(console.error);
            ```
          </script>
      </section>
      <section data-markdown>
        <script type="text/template">
            ### Stream Example
            ```ts
            const source = fetch('./index.wasm')
            WebAssembly.compileStreaming(source).then(module =>
              WebAssembly.instantiate(module, {
                env: {
                  xxx: yyy
                }
              })
            ).then(instance => {
              //xxx
            }).catch(console.error);
            ```
          </script>
      </section>

      <section data-markdown>
        <script type="text/template">
              ### Sync Example
              ```ts
              const buffer = fetchSync('./index.wasm');
              const module = new WebAssembly.Module(buffer);
              const instance = new WebAssembly.Instance(module, {xxx});
              ```
            </script>
      </section>

      <section data-background="#43a047">
        <h2 style="color:#fff">WASM 1.0 Spec: Design</h2>
      </section>
      <section data-markdown>
        <script type="text/template">
          ### Operand Stack
          WASMæ˜¯ç”±ä¸€ç³»åˆ—çš„æŒ‡ä»¤æ„æˆï¼Œè®¡ç®—æ¨¡å‹ä¸ºâ€œå †æ ˆå¼è™šæ‹Ÿæœºâ€ï¼Œå †æ ˆæœºå®ç°ç®€å•ï¼Œæ‰§è¡Œæ•ˆç‡è¾ƒé«˜ã€‚  
          æŒ‡ä»¤å¯ä»¥å¯¹æ“ä½œå †æ ˆæœºä¸­çš„æ•°å€¼è¿›è¡Œä¸¤ç§åŸºæœ¬æ“ä½œï¼š
          1. æ¶ˆè€—æŒ‡ä»¤å‚æ•° -> pop
          2. è¿”å›è®¡ç®—ç»“æœ -> push


          <br />
          <br />
          <small>ç›®å‰Specè§„å®šå•ä¸ªæŒ‡ä»¤æœ€å¤šåªèƒ½è¿”å›ä¸€ä¸ªç»“æœ</small>
        </script>
      </section>
      <section>
        <img src="https://raw.githubusercontent.com/stkevintan/pico/master/20190917213102.png" />
      </section>
      <section data-markdown>
        <script type="text/template">
              ### Structure
              ![](https://raw.githubusercontent.com/stkevintan/pico/master/949ac4f5.png)
            </script>
      </section>
      <section data-background="#43a047">
        <h2 style="color:#fff">WASM 1.0 Spec: Instruction</h2>
      </section>
      <section data-markdown data-separator-notes="^Note:">
        <script type="text/template">
                ### Types
$$
\begin{array}{lll}
 {\mathit{resulttype}} &::=&
  [{\mathit{valtype}}^?] \\
\end{array}
$$

$$
\begin{array}{lll}
{\mathit{valtype}} &::=&
  {\mathsf{i32}} ~ | ~ {\mathsf{i64}} ~ | ~ {\mathsf{f32}} ~ | ~ {\mathsf{f64}} \\
\end{array}
$$

$$
\begin{array}{lll}
\mathit{functype} &::=&
  [{\mathit{vec}}({\mathit{valtype}})]{\rightarrow} [{\mathit{vec}}({\mathit{valtype}})] \\
\end{array}
$$

<small>`i32`å’Œ`i64`ä»£è¡¨ç€32å’Œ64ä½çš„æ•´æ•°ï¼Œiæ˜¯interpretationçš„æ„æ€ï¼Œåœ¨å…·ä½“çš„æ“ä½œä¸­å¯ä»¥è§£é‡Šä¸ºsignedæˆ–è€…unsigned</small><br/>
<small>$vec(x)$ æ„æ€ä¸ºä¸€ä¸ªxçš„åºåˆ—ï¼Œåºåˆ—é•¿åº¦å°äº$2^{32}$</small><br/>
<small>$|t|$ ä¸€èˆ¬ç”¨æ¥è¡¨ç¤ºtçš„å­—èŠ‚å®½(bit width), $|i32| = |f32| = 32$ ï¼Œ$|i64| = |f64|  = 64$</small>
Note:
The types ğ—‚ğŸ¥ğŸ¤ and ğ—‚ğŸ¨ğŸ¦ classify 32 and 64 bit integers, respectively. Integers are not inherently signed or unsigned, their interpretation is determined by individual operations.
 </script>
      </section>
      <section data-markdown>
        <script type="text/template">

$$
\begin{array}{lll}
 {\mathit{limits}} &::=&
  \{ {\mathsf{min}} ~ {\mathit{u32}}, {\mathsf{max}} ~ {\mathit{u32}}^? \} \\
\end{array}
$$
$$
\begin{array}{lll}
 {\mathit{memtype}} &::=&
  {\mathit{limits}} \\
\end{array}
$$
$$
\begin{array}{llll}
 {\mathit{tabletype}} &::=&
  {\mathit{limits}} ~ {\mathit{elemtype}} \\\\
 {\mathit{elemtype}} &::=&
  {\mathsf{funcref}} \\
\end{array}
$$
<small>memoryä¸tableæœ€å¤šåªèƒ½å­˜åœ¨ä¸€ä¸ª</small><br/>
<small>memoryæ˜¯ä¸€å—çº¿æ€§çš„è™šæ‹Ÿå†…å­˜ï¼Œlimitçš„å•ä½æ˜¯64kb</small><br/>
<small>$funcref$ æ˜¯æ‰€æœ‰å‡½æ•°ç±»å‹çš„é›†åˆï¼ŒæŸäº›åœ°æ–¹ä¹Ÿå†™ä¸º$anyfunc$</small>
<small>tableå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå‡½æ•°æŒ‡é’ˆæ„æˆçš„è¡¨,å°†æ¥å¯èƒ½ä¼šåŒ…å«æ›´å¤šçš„ç±»å‹</small>
              </script>
      </section>
      <section data-markdown>
        <script type="text/template">
                  $$
\begin{array}{lll}
 {\mathit{globaltype}} &::=&
  {\mathit{mut}} ~ {\mathit{valtype}} \\\\
 {\mathit{mut}} &::=&
  {\mathsf{const}} ~ | ~
  {\mathsf{var}} \\\\
\end{array}
$$

$$
\begin{array}{llll}
 {\mathit{externtype}} &::=&
  {\mathsf{func}} ~ {\mathit{functype}} ~ | ~
  {\mathsf{table}} ~ {\mathit{tabletype}} ~ | ~ \\\\
  & &{\mathsf{mem}} ~ {\mathit{memtype}} ~ | ~
  {\mathsf{global}} ~ {\mathit{globaltype}} 
\end{array}
$$
                </script>
      </section>
      <section data-markdown>
        <script type="text/template">
          ### Numeric Instructions
<div style="font-size: 18px;">
`$$
                \begin{aligned}
                \begin{array}{llcl}
                 &\mathit{nn}, \mathit{mm} &::=&
                  \mathsf{32} ~|~ \mathsf{64} \\
                 &{\mathit{sx}} &::=&
                  \mathsf{u} ~|~ \mathsf{s} \\
                 &{\mathit{instr}} &::=&
                  \mathsf{i}\mathit{nn}\mathsf{.}{\mathsf{const}}~{{\mathit{nn}}} ~|~
                  \mathsf{f}\mathit{nn}\mathsf{.}{\mathsf{const}}~{{{\mathit{f}}}{\mathit{nn}}} \\&&|&
                  \mathsf{i}\mathit{nn}\mathsf{.}{\mathit{iunop}} ~|~
                  \mathsf{f}\mathit{nn}\mathsf{.}{\mathit{funop}} \\&&|&
                  \mathsf{i}\mathit{nn}\mathsf{.}{\mathit{ibinop}} ~|~
                  \mathsf{f}\mathit{nn}\mathsf{.}{\mathit{fbinop}} \\&&|&
                  \mathsf{i}\mathit{nn}\mathsf{.}{\mathit{itestop}} \\&&|&
                  \mathsf{i}\mathit{nn}\mathsf{.}{\mathit{irelop}} ~|~
                  \mathsf{f}\mathit{nn}\mathsf{.}{\mathit{frelop}} \\&&|&
                  \mathsf{i32.}{\mathsf{wrap}}\mathsf{\_i64} ~|~
                  \mathsf{i64.}{\mathsf{extend}}\mathsf{\_i32}\mathsf{\_}{\mathit{sx}} ~|~
                  \mathsf{i}\mathit{nn}\mathsf{.}{\mathsf{trunc}}\mathsf{\_f}\mathit{mm}\mathsf{\_}{\mathit{sx}} \\&&|&
                  \mathsf{f32.}{\mathsf{demote}}\mathsf{\_f64} ~|~
                  \mathsf{f64.}{\mathsf{promote}}\mathsf{\_f32} ~|~
                  \mathsf{f}\mathit{nn}\mathsf{.}{\mathsf{convert}}\mathsf{\_i}\mathit{mm}\mathsf{\_}{\mathit{sx}} \\&&|&
                  \mathsf{i}\mathit{nn}\mathsf{.}{\mathsf{reinterpret}}\mathsf{\_f}\mathit{nn} ~|~
                  \mathsf{f}\mathit{nn}\mathsf{.}{\mathsf{reinterpret}}\mathsf{\_i}\mathit{nn} \\&&|&
                  \dots \\
                 &{\mathit{iunop}} &::=&
                  \mathsf{clz} ~|~
                  \mathsf{ctz} ~|~
                  \mathsf{popcnt} \\
                 &{\mathit{ibinop}} &::=&
                  \mathsf{add} ~|~
                  \mathsf{sub} ~|~
                  \mathsf{mul} ~|~
                  \mathsf{div\_}{\mathit{sx}} ~|~
                  \mathsf{rem\_}{\mathit{sx}} \\&&|&
                  \mathsf{and} ~|~
                  \mathsf{or} ~|~
                  \mathsf{xor} ~|~
                  \mathsf{shl} ~|~
                  \mathsf{shr\_}{\mathit{sx}} ~|~
                  \mathsf{rotl} ~|~
                  \mathsf{rotr} \\
                 &{\mathit{funop}} &::=&
                  \mathsf{abs} ~|~
                  \mathsf{neg} ~|~
                  \mathsf{sqrt} ~|~
                  \mathsf{ceil} ~|~
                  \mathsf{floor} ~|~
                  \mathsf{trunc} ~|~
                  \mathsf{nearest} \\
                &{\mathit{fbinop}} &::=&
                  \mathsf{add} ~|~
                  \mathsf{sub} ~|~
                  \mathsf{mul} ~|~
                  \mathsf{div} ~|~
                  \mathsf{min} ~|~
                  \mathsf{max} ~|~
                  \mathsf{copysign} \\
                 &{\mathit{itestop}} &::=&
                  \mathsf{eqz} \\
                 &{\mathit{irelop}} &::=&
                  \mathsf{eq} ~|~
                  \mathsf{ne} ~|~
                  \mathsf{lt\_}{\mathit{sx}} ~|~
                  \mathsf{gt\_}{\mathit{sx}} ~|~
                  \mathsf{le\_}{\mathit{sx}} ~|~
                  \mathsf{ge\_}{\mathit{sx}} \\
                 &{\mathit{frelop}} &::=&
                  \mathsf{eq} ~|~
                  \mathsf{ne} ~|~
                  \mathsf{lt} ~|~
                  \mathsf{gt} ~|~
                  \mathsf{le} ~|~
                  \mathsf{ge} \\
                \end{array}
                \end{aligned}
                $$`
</div>
                  </script>
      </section>
      <section data-markdown style="font-size: 30px;">
        <script type="text/template">
                      æ•°å€¼æŒ‡ä»¤å¯ä»¥æŒ‰æ•°å€¼ç±»å‹å½’ç±»ï¼Œå¯¹äºæ¯ä¸€ç§ç±»å‹ï¼Œéƒ½å­˜åœ¨ç€ä¸‹é¢å‡ ä¸ªå­ç±»å‹ï¼š
1. Contants: è¿”å›ä¸€ä¸ªé™æ€å¸¸é‡
2. Unary Operations: æ¶ˆè€—ä¸€ä¸ªæ“ä½œæ•°å¹¶ä¸”äº§ç”Ÿä¸€ä¸ªç›¸åº”ç±»å‹çš„ç»“æœ
3. Binary Operations:æ¶ˆè€—ä¸¤ä¸ªæ“ä½œæ•°å¹¶ä¸”äº§ç”Ÿä¸€ä¸ªç›¸åº”ç±»å‹çš„ç»“æœ
4. Tests: æ¶ˆè€—ä¸€ä¸ªæ“ä½œæ•°ï¼Œäº§ç”Ÿä¸€ä¸ªBoolean intergerçš„ç»“æœ 
5. Comparisons: æ¶ˆè€—ä¸¤ä¸ªæ“ä½œæ•°ï¼Œäº§ç”Ÿä¸€ä¸ªBoolean integerç»“æœ
6. Conversions: æ¶ˆè€—ä¸€ä¸ªæŸç§ç±»å‹çš„å€¼ï¼Œäº§ç”Ÿä¸€ä¸ªå…¶ä»–ç§ç±»çš„ç»“æœ(åŸç±»å‹æ ‡å¿—åœ¨"_"åé¢)
                    </script>
      </section>
      <section data-markdown>
        <script type="text/template">
                        ### Parametric Instructions
                        ä¸‹é¢çš„æŒ‡ä»¤å¯ä»¥æ“ä½œæ ˆä¸Šä»»æ„å€¼ç±»å‹çš„æ“ä½œæ•°ï¼š
`$$
\begin{array}{llcl}
 &{\mathit{instr}} &::=&
  \dots \\&&|&
  {\mathsf{drop}} \\&&|&
  {\mathsf{select}}
\end{array}
$$`
1. `drop`æŒ‡ä»¤ç®€å•çš„ä¸¢ä¸€ä¸ªæ“ä½œæ•°
2. `select`æŒ‡ä»¤å°†åŸºäºç¬¬ä¸‰å°æ“ä½œæ•°æ˜¯å¦ä¸º0çš„æ¡ä»¶æ¥é€‰æ‹©å‰ä¸¤ä¸ªæ“ä½œæ•°å…¶ä¸­ä¹‹ä¸€
                      </script>
      </section>
      <section data-markdown class="small-li">
        <script type="text/template">
          ### Variable Instructions

          å˜é‡æŒ‡ä»¤éœ€è¦è€ƒè™‘æ˜¯ä»`local`è¿˜æ˜¯ä»`global`è·å–å˜é‡  
          `$$
          \begin{array}{llcl}
           & {\mathit{instr}} &::=&
            \dots \\&&|&
            {\mathsf{local.get}}~{\mathit{localidx}} \\&&|&
            {\mathsf{local.set}}~{\mathit{localidx}} \\&&|&
            {\mathsf{local.tee}}~{\mathit{localidx}} \\&&|&
            {\mathsf{global.get}}~{\mathit{globalidx}} \\&&|&
            {\mathsf{global.set}}~{\mathit{globalidx}} \\
          \end{array}
          $$`
          1. `local.tee`æŒ‡ä»¤è·Ÿ`local.set`æŒ‡ä»¤ç›¸ä¼¼ï¼Œä½†ä¸ä¼šæ¶ˆè€—æ“ä½œæ•°
                        </script>
      </section>
      <section data-markdown>
        <script type="text/template">
          ### Memory Instructions
          <div style="font-size: 18px">
          `$$
          \begin{array}{llcl}
           & {\mathit{memarg}} &::=&
            \{ {\mathsf{offset}}~{\mathit{u32}}, {\mathsf{align}}~{\mathit{u32}} \} \\
           & {\mathit{instr}} &::=&
            \dots \\&&|&
            \mathsf{i}\mathit{nn}\mathsf{.}{\mathsf{load}}~{\mathit{memarg}} ~|~
            \mathsf{f}\mathit{nn}\mathsf{.}{\mathsf{load}}~{\mathit{memarg}} \\&&|&
            \mathsf{i}\mathit{nn}\mathsf{.}{\mathsf{store}}~{\mathit{memarg}} ~|~
            \mathsf{f}\mathit{nn}\mathsf{.}{\mathsf{store}}~{\mathit{memarg}} \\&&|&
            \mathsf{i}\mathit{nn}\mathsf{.}{\mathsf{load}}\mathsf{8\_}{\mathit{sx}}~{\mathit{memarg}} ~|~
            \mathsf{i}\mathit{nn}\mathsf{.}{\mathsf{load}}\mathsf{16\_}{\mathit{sx}}~{\mathit{memarg}} ~|~
            \mathsf{i64.}{\mathsf{load}}\mathsf{32\_}{\mathit{sx}}~{\mathit{memarg}} \\&&|&
            \mathsf{i}\mathit{nn}\mathsf{.}{\mathsf{store}}\mathsf{8}~{\mathit{memarg}} ~|~
            \mathsf{i}\mathit{nn}\mathsf{.}{\mathsf{store}}\mathsf{16}~{\mathit{memarg}} ~|~
            \mathsf{i64.}{\mathsf{store}}\mathsf{32}~{\mathit{memarg}} \\&&|&
            {\mathsf{memory.size}} \\&&|&
            {\mathsf{memory.grow}} \\
          \end{array}
          $$`
          </div>
                          </script>
      </section>
      <section data-markdown>
        <script type="text/template">
          ### Control Instructions
          <div style="font-size: 25px;">
          `$$
          \begin{array}{llcl}
          & {\mathit{instr}} &::=&
            \dots \\&&|&
            {\mathsf{nop}} \\&&|&
            {\mathsf{unreachable}} \\&&|&
            {\mathsf{block}}~{\mathit{resulttype}}~{\mathit{instr}}^\ast~{\mathsf{end}} \\&&|&
            {\mathsf{loop}}~{\mathit{resulttype}}~{\mathit{instr}}^\ast~{\mathsf{end}} \\&&|&
            {\mathsf{if}}~{\mathit{resulttype}}~{\mathit{instr}}^\ast~{\mathsf{else}}~{\mathit{instr}}^\ast~{\mathsf{end}} \\&&|&
            {\mathsf{br}}~{\mathit{labelidx}} \\&&|&
            {\mathsf{br\_if}}~{\mathit{labelidx}} \\&&|&
            {\mathsf{br\_table}}~{\mathit{vec}}({\mathit{labelidx}})~{\mathit{labelidx}} \\&&|&
            {\mathsf{return}} \\&&|&
            {\mathsf{call}}~{\mathit{funcidx}} \\&&|&
            {\mathsf{call\_indirect}}~{\mathit{typeidx}} \\
          \end{array}
          $$`
          </div>
                            </script>
      </section>
      <section data-markdown>
        <script type="text/template">
                                ### Control Instructions
                                1. `nop`æŒ‡ä»¤ä¸åšä»»ä½•äº‹æƒ…
2. `unreachable`æŒ‡ä»¤å°†ä¼šè§¦å‘ä¸€ä¸ªæ— æ¡ä»¶çš„trap
3. `block`,`loop`,`if` æŒ‡ä»¤æ˜¯ç»“æ„åŒ–æŒ‡ä»¤ã€‚ä»–ä»¬åŒ…å«ä¸€ç³»åˆ—å†…åµŒ(nested)æŒ‡ä»¤,ç§°ä¸º(blocks)
4. `else`, `end`æŒ‡ä»¤ä¸ºè™šæŒ‡ä»¤ï¼Œä½œä¸ºç»“æ„åŒ–æŒ‡ä»¤çš„æ ‡è®°
5.  æ¯ä¸ªç»“æ„åŒ–æŒ‡ä»¤éƒ½ä¼šå¼•å…¥ä¸€ä¸ªéšå¼æ ‡ç­¾(label)
                              </script>
      </section>
      <section data-markdown>
        <script type="text/template">
                                  ### br æ— æ¡ä»¶è·³è½¬
                                  ```
                                  block
                                    ...
                                    br 0  ;; ç»ˆç«¯labelä¸º0çš„block
                                    nop   ;; ä¸ä¼šè¢«æ‰§è¡Œçš„ä»£ç 
                                  end
                                  ```
                                </script>
      </section>
      <section data-markdown>
        <script type="text/template">
                                    ### br_if æ¡ä»¶è·³è½¬
                                    ```
                                    block
                                      get_local $var
                                      br_if 0
                                      nop  ;;å¦‚æœ$varå€¼ä¸º0åˆ™æ‰§è¡Œè¿™æ¡è¯­å¥
                                    end
                                    ;; å¦‚æœ$varä¸ä¸º0åˆ™ä»æ¬¡å¼€å§‹æ‰§è¡Œ
                                    ```
                                  </script>
      </section>
      <section data-markdown>
        <script type="text/template">
                                      ### loop å¾ªç¯
                                      loopéœ€è¦ä½¿ç”¨br_xxæŒ‡ä»¤æ¥è¿›è¡Œå›æº¯ï¼š

                                      ```
                                      loop
                                        nop
                                        ;; Aï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡
                                      end
                                        ;; Aæ‰§è¡Œå®Œæ¥ç€æ‰§è¡Œ
                                      ```
                                      ```
                                      loop
                                        ...
                                        get_local $var
                                        br_if 0  ;; å½“$varä¸ä¸º0ï¼Œloopå°†ä¼šå†æ¬¡ä»å¤´å¼€å§‹æ‰§è¡Œï¼Œdo ... while()
                                      end
                                      ```
            </script>
      </section>
      <section data-markdown>
        <script type="text/template">
                                        ### Modules
WebAssemblyç¨‹åºç”±æ¨¡å—æ¥ç»„ç»‡ï¼Œæ¨¡å—æ˜¯wasméƒ¨ç½²ï¼ŒåŠ è½½ï¼Œç¼–è¯‘çš„å•ä½ã€‚ä¸€ä¸ªæ¨¡å—åŒ…æ‹¬ï¼š
<div style="font-size: 20px">
`$$
\begin{array}{lllll}
& {\mathit{module}} &::=& \{ &
  {\mathsf{types}}~{\mathit{vec}}({\mathit{functype}}), \\&&&&
  {\mathsf{funcs}}~{\mathit{vec}}({\mathit{func}}), \\&&&&
  {\mathsf{tables}}~{\mathit{vec}}({\mathit{table}}), \\&&&&
  {\mathsf{mems}}~{\mathit{vec}}({\mathit{mem}}), \\&&&&
  {\mathsf{globals}}~{\mathit{vec}}({\mathit{global}}), \\&&&&
  {\mathsf{elem}}~{\mathit{vec}}({\mathit{elem}}), \\&&&&
  {\mathsf{data}}~{\mathit{vec}}({\mathit{data}}), \\&&&&
  {\mathsf{start}}~{\mathit{start}}^?, \\&&&&
  {\mathsf{imports}}~{\mathit{vec}}({\mathit{import}}), \\&&&&
  {\mathsf{exports}}~{\mathit{vec}}({\mathit{export}}) \quad\} \\
\end{array}
$$`
</div>
                                      </script>
      </section>
      <section data-background="#43a047">
        <h2 style="color:#fff">WASM 1.0 Spec: Validation</h2>
      </section>
      <section data-markdown>
        <script type="text/template">
### Type System
ç±»å‹ç³»ç»Ÿçš„æ¨¡å‹ä¹Ÿæ˜¯ä¸€ä¸ªæ ˆï¼Œæˆä¸ºç±»å‹æ ˆï¼Œä¸æ“ä½œæ•°æ ˆï¼ˆoperand stack)ç±»å‹ï¼Œä¸è¿‡åªæœ‰ç±»å‹ï¼Œæ²¡æœ‰å…·ä½“æ•°å€¼  
<img src="https://raw.githubusercontent.com/stkevintan/pico/master/20190917225917.png" height="400px;"/>
</script>
      </section>
      <section data-markdown>
        <script type="text/template">
### Formal Notation
`$$\frac{
  \mathit{premise}_1 \qquad \mathit{premise}_2 \qquad \dots \qquad \mathit{premise}_n
}{
  \mathit{conclusion}
}$$`

`$$
\frac{
}{
  C \vdash \mathsf{i32}.\mathsf{add} : [\mathsf{i32}~\mathsf{i32}] \rightarrow[\mathsf{i32}]
}
$$`

`$$
\frac{
  C.{\mathsf{locals}}[x] = t
}{
  C \vdash {\mathsf{local.get}}~x : [] {\rightarrow} [t]
}
$$`

`$$
\frac{
  C,{\mathsf{label}}\,[t^?] \vdash {\mathit{instr}}^\ast : [] {\rightarrow} [t^?]
}{
  C \vdash {\mathsf{block}}~[t^?]~{\mathit{instr}}^\ast~{\mathsf{end}} : [] {\rightarrow} [t^?]
}
$$`
</script>
      </section>
      <section data-markdown>
        <script type="text/template">
### Polymorphic
1. å€¼å¤šæ€`value-polymorphic`: å…¶ä¸­ä¸€äº›å€¼æˆ–è€…æ“ä½œæ•°æ˜¯ä¸é™å®šçš„ï¼Œæ¯”å¦‚dropï¼Œselect
2. æ ˆå¤šæ€`stack-polymorphic`: å¯¹æ ˆçš„çŠ¶æ€æ˜¯ä¸é™å®šçš„ï¼Œæ¯”å¦‚æ‰€æœ‰æ§åˆ¶æŒ‡ä»¤: `unreachable`,`br`,`br_table`å’Œ`return`

</script>
      </section>
      <section data-markdown>
        <script type="text/template">
### Unreachable
Unreachableè™½ç„¶ä¸ä¼šæ‰§è¡Œï¼Œä½†ä¹Ÿè¦è¿›è¡Œç±»å‹æ£€æŸ¥: å¦‚æœå­˜åœ¨ä¸€ä¸ªæ»¡è¶³å½“å‰æŒ‡ä»¤å—çš„æ ˆçŠ¶æ€çš„è¯é‚£ä¹ˆå°±åˆæ³•ï¼Œå¦åˆ™å°±ä¸åˆæ³•ï¼š
`$$
{\mathsf{unreachable}}~~{\mathsf{i32}}.{\mathsf{add}}
$$`

æ˜¯åˆæ³•çš„ï¼Œå› ä¸ºå½“ä¸€ä¸ªæ ˆçŠ¶æ€ä¸º`$[\mathsf{i32},\mathsf{i32}]$`çš„æ—¶å€™ï¼Œ`unreachable`çš„è¯­å¥èƒ½å¤Ÿé¡ºåˆ©æ‰§è¡Œã€‚

`$$
{\mathsf{unreachable}}~~({\mathsf{i64}}.{\mathsf{const}}~0)~~{\mathsf{i32}}.{\mathsf{add}}
$$`

æ˜¯ä¸åˆæ³•çš„ï¼Œå› ä¸ºæ‰¾ä¸åˆ°ä¸€ä¸ªæ ˆèƒ½å¤Ÿè®©è¿™ä¸ªæŒ‡ä»¤å—æ­£å¸¸æ‰§è¡Œã€‚
</script>
      </section>
      <section data-background="#43a047">
        <h2 style="color:#fff">WASM 1.0 Spec: Memory Model</h2>
      </section>
      <section data-markdown>
        <script type="text/template">
### è™šæ‹Ÿå†…å­˜ï¼ˆVirtual Memoryï¼‰
è®¡ç®—æœºçš„æ®µé¡µå¼çš„å†…å­˜æ¨¡å‹ï¼š
![](https://raw.githubusercontent.com/stkevintan/pico/master/f14d95f3.png)
</script>
      </section>
      <section data-markdown>
        <script type="text/template">
### è™šæ‹Ÿå†…å­˜ï¼ˆVirtual Memoryï¼‰
è®¡ç®—æœºçš„æ®µé¡µå¼çš„å†…å­˜æ¨¡å‹ï¼š
![](https://raw.githubusercontent.com/stkevintan/pico/master/98d3c30c.png)

<small>åº”ç”¨ç¨‹åºä½¿ç”¨çš„éƒ½æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…å¥½çš„è™šæ‹Ÿå†…å­˜ï¼Œç§°ä¸ºè™šæ‹Ÿåœ°å€ç©ºé—´(Virtual Address Space)</small>
</script>
      </section>
      <section data-markdown>
        <script type="text/template">
                          ### Memory Layout of Wasm Module
                          ![](https://raw.githubusercontent.com/stkevintan/pico/master/9726a076.png)
                        </script>
      </section>
      <section data-markdown>
        <script type="text/template">
          ### Memory Alignment
          - å¦‚æœä¸€ä¸ªå†…å­˜çš„è®¿é—®æœ‰æ•ˆåœ°å€ï¼ˆEffective addressï¼‰æ˜¯å‚¨å­˜å™¨è®¿é—®çš„å¯¹é½å±æ€§çš„å€æ•°ï¼Œé‚£ä¹ˆè¿™æ¬¡å‚¨å­˜å™¨è®¿é—®å°±è¢«ç§°ä¸ºæ˜¯å¯¹é½çš„ï¼Œå¦åˆ™æ˜¯ä¸å¯¹é½ã€‚  
          - å¯¹é½ä¸ä¸å¯¹é½çš„è®¿é—®å…·æœ‰ç›¸åŒçš„è¡Œä¸ºï¼Œä½†æ˜¯å¯¹é½ä¼šæé«˜CPUçš„å¤„ç†é€Ÿåº¦ã€‚
          - æœ‰æ•ˆåœ°å€ï¼Œä¹Ÿå³æ˜¯å½“å‰è®¿é—®çš„çœŸå®åœ°å€ï¼ˆç›¸å¯¹äºoffsetæ¥è¯´ï¼‰
`$effective\_adress = address\_operand + offset$`

        </script>
      </section>
      <section data-markdown>
        <script type="text/template">
            ### Aligned Example
            ```
i32.const 3       // address_operand = 3
i64.const 1234    // value
i64.store16 1 3 // alignment=1, offset=3, effective_address = 3 + 3 = 6
```
![](https://rsms.me/res/wasm/memory-1.svg)

          </script>
      </section>
      <section data-markdown>
        <script type="text/template">
              ### Misaligned Example
        ```
        i32.const 3
        i64.const 1234
        i64.store16 2 3 // alignment=2
        ```
![](https://rsms.me/res/wasm/memory-2.svg)
            </script>
      </section>

      <section data-background="#43a047">
        <h2 style="color:#fff">WASM 1.0 Spec: Binary Format</h2>
      </section>
      <section data-markdown>
        <script type="text/template">
            ### å­—èŠ‚åº
            1. å°ç«¯åº(little endian): æ•°å­—ä½ä½å­˜å‚¨åœ¨å†…å­˜ä½ä½
            2. å¤§ç«¯åº(big endian): æ•°å­—ä½ä½å­˜å‚¨åœ¨å†…å­˜é«˜ä½

            <div style="display:flex; justify-content: space-around;">
              <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/ed/Little-Endian.svg/560px-Little-Endian.svg.png"/>
              <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/54/Big-Endian.svg/560px-Big-Endian.svg.png" />
            </div>
          </script>
      </section>
      <section data-markdown>
        <script type="text/template">
              ### Instructions Encoding
              ç”±äºWasm 1.0å¯ç”¨è™šæ‹ŸæŒ‡ä»¤æ•°é‡å°äº256ä¸ªï¼Œå› æ­¤ç›®å‰è™šæ‹ŸæŒ‡ä»¤å…¨éƒ¨ç¡¬ç¼–ç æˆäº†å›ºå®š1å­—èŠ‚çš„Opcodeï¼Œå¦‚ï¼š
              `$$
                \begin{array}{llcll}
                &{\mathtt{valtype}} &::=&
                  {\mathtt{0x7F}}&\Rightarrow& {\mathsf{i32}} \\ &&|&
                  {\mathtt{0x7E}} &\Rightarrow& {\mathsf{i64}} \\ &&|&
                  {\mathtt{0x7D}} &\Rightarrow& {\mathsf{f32}} \\ &&|&
                  {\mathtt{0x7C}} &\Rightarrow& {\mathsf{f64}} \\
                \end{array}
              $$`
            </script>
      </section>
      <section data-markdown>
        <script type="text/template">
          ### å¸¸è§ç¼–ç æ–¹å¼ï¼š
          1. Bytes: bytes encoding themselves
          2. Name: ç›´æ¥ç”±UTF-8ç¼–ç 
          3. Floatï¼šç”±IEEE 754-2019è§„èŒƒç¼–ç ï¼Œä»¥å°ç«¯åºå‚¨å­˜
          4. Integers: LEB128å˜é•¿ç¼–ç 
        </script>
      </section>
      <section data-markdown>
        <script type="text/template">
                  ### LEB128 for unsigned
                  ```
624485
MSB ------------------ LSB
      10011000011101100101  In raw binary
     010011000011101100101  Padded to a multiple of 7 bits
 0100110  0001110  1100101  Split into 7-bit groups
00100110 10001110 11100101  Add high 1 bits on all but last (most significant) group to form bytes
    0x26     0x8E     0xE5  In hexadecimal

â†’ 0xE5 0x8E 0x26            Output stream (LSB to MSB)
```
                </script>
      </section>
      <section data-markdown>
        <script type="text/template">
                    ### LEB128 for signed
                    #### signed LEB128
```
-123456
MSB ------------------ LSB 
         11110001001000000  Binary encoding of 123456
     000011110001001000000  As a 21-bit number
     111100001110110111111  Flipping all bits (oneâ€™s complement)
     111100001110111000000  Adding one (twoâ€™s complement)
 1111000  0111011  1000000  Split into 7-bit groups
01111000 10111011 11000000  Add high 1 bits on all but last (most significant) group to form bytes
    0x78     0xBB     0xC0  In hexadecimal

â†’ 0xC0 0xBB 0x78            Output stream (LSB to MSB)
```
                  </script>
      </section>
      <section data-markdown class="full">
        <script type="text/template">
                      ### Example
```
~: hexdump -C index.wasm
00000000  00 61 73 6d 01 00 00 00  01 10 03 60 00 00 60 02  |.asm.......`..`.|
00000010  7f 7f 01 7f 60 02 7c 7c  01 7c 03 05 04 00 01 02  |....`.||.|......|
00000020  01 04 05 01 70 01 01 01  05 03 01 00 02 06 15 03  |....p...........|
00000030  7f 01 41 80 88 04 0b 7f  00 41 80 88 04 0b 7f 00  |..A......A......|
00000040  41 80 08 0b 07 48 06 06  6d 65 6d 6f 72 79 02 00  |A....H..memory..|
00000050  0b 5f 5f 68 65 61 70 5f  62 61 73 65 03 01 0a 5f  |.__heap_base..._|
00000060  5f 64 61 74 61 5f 65 6e  64 03 02 08 5f 5a 33 61  |_data_end..._Z3a|
00000070  64 64 69 69 00 01 08 5f  5a 33 61 64 64 64 64 00  |ddii..._Z3adddd.|
00000080  02 0a 5f 5a 35 6d 69 6e  75 73 69 69 00 03 0a 1c  |.._Z5minusii....|
00000090  04 02 00 0b 07 00 20 01  20 00 6a 0b 07 00 20 00  |...... . .j... .|
000000a0  20 01 a0 0b 07 00 20 00  20 01 6b 0b 00 50 04 6e  | ..... . .k..P.n|
000000b0  61 6d 65 01 49 04 00 11  5f 5f 77 61 73 6d 5f 63  |ame.I...__wasm_c|
000000c0  61 6c 6c 5f 63 74 6f 72  73 01 0d 61 64 64 28 69  |all_ctors..add(i|
000000d0  6e 74 2c 20 69 6e 74 29  02 13 61 64 64 28 64 6f  |nt, int)..add(do|
000000e0  75 62 6c 65 2c 20 64 6f  75 62 6c 65 29 03 0f 6d  |uble, double)..m|
000000f0  69 6e 75 73 28 69 6e 74  2c 20 69 6e 74 29        |inus(int, int)|
```
                    </script>
      </section>

      <section data-background="#43a047">
        <h2 style="color:#fff">WebAssembly Post MVC</h2>
      </section>

      <section data-markdown>
        <script type="text/template">
                        1. Interface Types: [Proposals](https://github.com/WebAssembly/interface-types/blob/master/proposals/interface-types/Explainer.md)
                        2. GC: [Proposals](https://github.com/WebAssembly/gc)
                        3. SIMD: 128-bit SIMD support for WASM [Proposals](https://github.com/WebAssembly/simd/tree/master/proposals/simd)
                        4. WASI: WebAssembly System Interface [Github](https://github.com/WebAssembly/WASI)
                      </script>
      </section>

      <section data-background="#43a047">
        <h2 style="color:#fff">WebAssembly with Rust</h2>
      </section>
      <section data-markdown>
        <script type="text/template">
                          ### wasm-bindgen
                          Facilitating high-level interactions between Wasm modules and JavaScript.   
                          [Game of Life](https://rustwasm.github.io/docs/book/game-of-life/rules.html)
                        </script>
      </section>
      <section data-markdown>
        <script type="text/template">
                            ### [percy](https://github.com/chinedufn/percy)
                            åœ¨Rusté‡Œé€ ä¸€ä¸ªReactè½®å­ï¼
                            1. Virtual DOM
                            2. CSS in rust
                            3. SSR
                        
                          </script>
      </section>

    </div>
  </div>




  <script src="js/reveal.js"></script>

  <script>
    // More info about config & dependencies:
    // - https://github.com/hakimel/reveal.js#configuration
    // - https://github.com/hakimel/reveal.js#dependencies
    Reveal.initialize({
      controls: true,
      progress: true,
      hash: true,
      center: true,
      transition: 'slide',
      dependencies: [
        { src: 'plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
        { src: 'plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
        { src: 'plugin/notes/notes.js', async: true },
        { src: 'plugin/highlight/highlight.js', async: true },
        // MathJax
        { src: 'plugin/math/math.js', async: true }
      ]
    });
  </script>
</body>

</html>